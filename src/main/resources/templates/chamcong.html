<!-- templates/chamcong.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Trang chấm công</title>
</head>
<body>
<h2>Lịch sử chấm công</h2>
<ul id="listChamCong"></ul>

<script>
    async function loadChamCong() {
        const token = localStorage.getItem("token");
        const res = await fetch("/api/chamcong", {
            headers: {
                "Authorization": "Bearer " + token
            }
        });

        if (res.ok) {
            const data = await res.json();
            const list = document.getElementById("listChamCong");
            data.forEach(item => {
                const li = document.createElement("li");
                li.textContent = `${item.ngayChamCong} - ${item.trangThai}`;
                list.appendChild(li);
            });
        } else {
            document.body.innerHTML = "<p>Vui lòng đăng nhập lại!</p>";
            window.location.href = "/login";
        }
    }

    loadChamCong();
</script>
</body>
</html>
